---
title: "ggiraph"
author: "Antoine Bichat"
date: "25/08/2020"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, warning = FALSE)
```

```{r, message=FALSE}
library(palmerpenguins)
library(tidyverse)
library(ggiraph)
library(cowplot)

theme_set(theme_minimal())
```

On va travailler avec le jeu de données des pingouins de Palmer. 

```{r}
penguins

ggplot(penguins) +
  aes(x =  bill_length_mm, y = bill_depth_mm, color = species) +
  geom_point() +
  scale_color_viridis_d()
```

Nous allons animer le graphe précédent pour que lorsqu'on passe la souris sur le point, un texte indiquant l'île s'affiche et tous les pinguoins de la même île se mettent à briller.

```{r}
p <-
  ggplot(penguins) +
  aes(x =  bill_length_mm, y = bill_depth_mm, color = species) +
  geom_point_interactive(aes(tooltip = str_c("Island: ", island), data_id = island)) +
  scale_color_viridis_d()

girafe(ggobj = p)
```

Nous allons dessiner deux nuages de points (donc quatre axes plus la couleur), et lorsqu'on passe sur un point dans un des deux nuages, sa représentation dans l'autre graphe se mette à briller.

```{r}
penguins <- rowid_to_column(penguins)

p1 <-
  ggplot(penguins) +
  aes(x = bill_length_mm, y = bill_depth_mm, color = species) +
  geom_point_interactive(aes(tooltip = str_c("Island: ", island), data_id = rowid)) +
  scale_color_viridis_d() +
  theme(legend.position = "none")

p2 <-
  ggplot(penguins) +
  aes(x = flipper_length_mm, y = body_mass_g , color = species) +
  geom_point_interactive(aes(tooltip = str_c("Island: ", island), data_id = rowid)) +
  scale_color_viridis_d() +
  theme(legend.position = "none")

girafe(ggobj = plot_grid(p1, p2))
```

